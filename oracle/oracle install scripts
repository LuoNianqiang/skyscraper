### 1. 检查软件包是否安装
rpm -q binutils compat-libcap1 compat-libstdc++-33 gcc gcc-c++ glibc glibc-devel ksh libgcc libstdc++ libstdc++-devel
rpm -q libaio libaio-devel libXext libXtst libX11 libXau libxcb libXi make sysstat
### 2. 创建操作系统组和系统用户
groupadd dba
groupadd oinstall
useradd -g oinstall -G dba oracle
### 3. 修改oracle密码
passwd oracle
### 4. 创建目录并授权
mkdir -p /data/u01/oracle
chown -R oracle:oinstall /data/u01/oracle
chmod -R 775 /data/u01/oracle
mkdir -p /data/u01/oracle/oraInventory
chown -R oracle:oinstall /data/u01/oracle/oraInventory
chmod -R 775 /data/u01/oracle/oraInventory
mkdir -p /usr/local/bin
chmod -R 775 /usr/local/bin
### 5. 设置环境变量
vim /home/oracle/.bash_profile
export ORACLE_BASE=/data/u01/oracle
export ORACLE_HOME=/data/u01/oracle/product/11gR2/db
export ORACLE_SID=STDDB
export ORACLE_TERM=xterm
LD_LIBRARY_PATH=$ORACLE_HOME/lib:/lib:/usr/lib:$ORACLE_HOME/rdbms/lib
export LD_LIBRARY_PATH
SHLIB_PATH=$ORACLE_HOME/lib:$ORACLE_HOME/rdbms/lib
export SHLIB_PATH
export PATH=$ORACLE_HOME/bin:/usr/sbin:$PATH:/usr/local/bin
CLASSPATH=$ORACLE_HOME/JRE:$ORACLE_HOME/jlib:$ORACLE_HOME/rdbms/jlib
export CLASSPATH=$CLASSPATH:$ORACLE_HOME/network/jlib
export NLS_LANG=AMERICAN_AMERICA.UTF8
### 6. 配置文件立即生效source /home/oracle/.bash_profile
### 7. 修改系统参数vim /etc/sysctl.conf
fs.aio-max-nr = 1048576
fs.file-max = 6815744
kernel.shmall = 2097152
kernel.shmmax = 4147483648
kernel.shmmni = 4096
kernel.sem = 250 32000 100 128
net.ipv4.ip_local_port_range = 9000 65500
net.core.rmem_default = 262144
net.core.rmem_max = 4194304
net.core.wmem_default = 262144
net.core.wmem_max = 1048586
### 8. 系统参数立即生效
/sbin/sysctl -p
### 9. 修改limits.conf
vim /etc/security/limits.conf
oracle              soft    nproc   2047
oracle              hard    nproc   16384
oracle              soft    nofile  1024
oracle              hard    nofile  65536
oracle              soft    stack   10240
oracle              hard    stack   32768
### 10. 解压安装文件
unzip p10404530_112030_Linux-x86-64_1of7.zip
unzip p10404530_112030_Linux-x86-64_2of7.zip
unzip p10404530_112030_Linux-x86-64_3of7.zip
chmod 770 -R databasechown oracle:dba -R database
### 11. 设置display环境变量
su - oracleexport DISPLAY=10.188.178.82:0.0
echo $DISPLAY
### 12. 开始安装
#database/runInstaller -ignoreSysPrereqs
### 12. 静默安装
## 复制并修改db_install.rsp
cp database/response/db_install.rsp  db_install.rsp
chown oracle:oinstall db_install.rsp
chmod 700 db_install.rsp
su – oracle
vim db_install.rsp

oracle.install.option=INSTALL_DB_SWONLY 
ORACLE_HOSTNAME=localhost 
UNIX_GROUP_NAME=oinstall 
INVENTORY_LOCATION=/data/u01/oracle/oraInventory 
SELECTED_LANGUAGES=en,zh_CN 
ORACLE_HOME=/data/u01/oracle/product/11gR2/db 
ORACLE_BASE=/data/u01/oracle
oracle.install.db.InstallEdition=EE 
oracle.install.db.DBA_GROUP=dba 
oracle.install.db.OPER_GROUP=oinstall 
oracle.install.db.config.starterdb.type=GENERAL_PURPOSE 
-- oracle.install.db.config.starterdb.globalDBName=orcl  //此处可以省略掉
-- oracle.install.db.config.starterdb.characterSet=AL32UTF8   //此处可以省略掉
-- oracle.install.db.config.starterdb.password.ALL=cc08CC08     //此处可以省略掉DECLINE_SECURITY_UPDATES=true
### 13. 开始安装
database/runInstaller -ignoreSysPrereqs -silent -noconfig -responseFile /data/software/db_install.rsp
### 14. 用root用户挡路 运行两个脚本
exit
/data/u01/oracle/oraInventory/orainstRoot.sh
/data/u01/oracle/product/11gR2/db/root.sh 
### 15. 安装网络监听器
cp database/response/netca.rsp netca.rsp
chown oracle:oinstall netca.rsp
chmod 700 netca.rsp
### 16. oracle用户下静默安装网络监听器
su - oracle$ORACLE_HOME/bin/netca  -silent -responseFile /data/software/netca.rsp
### 17. 修改dbstart
vim $ORACLE_HOME/bin/dbstart
ORACLE_HOME_LISTNER=$ORACLE_HOME
### 18. 创建数据库实例
exit
cp database/response/dbca.rsp dbca.rsp
chown  oracle:oinstall dbca.rsp
su - oracle

RESPONSEFILE_VERSION = "11.2.0"  //不能更改 
OPERATION_TYPE = "createDatabase" 
GDBNAME="STDDB" //全局数据库的名字=SID+主机域名，这里我设置为: 
STDDB SID="STDDB" //数据库的SID，这个比较重要，我第一次安装时就是因为这个问题无法使用，这里我修改为：STDDB 
TEMPLATENAME = "General_Purpose.dbc" //建库用的模板文件 
SYSPASSWORD="cc08CC08"    //SYS用户的初始密码，我设置为cc08CC08
SYSTEMPASSWORD="cc08CC08"    //SYSTEM用户的初始密码我设置为cc08CC08
DATAFILEDESTINATION =/data/u01/oracle/oradata //数据文件存放目录 
RECOVERYAREADESTINATION=/data/u01/oracle/oradata_backup //恢复数据存放目录 
CHARACTERSET="ZHS16GBK" //数据库字符集,重要!!!! 建库后一般不能更改（中文为 ZHS16GBK） 
AUTOMATICMEMORYMANAGEMENT= "FALSE"  //oracle内存800MB
$ORACLE_HOME/bin/dbca -silent -responseFile /data/software/dbca.rsp
### 19. 修改oracle启动配置文件:/etc/oratab
vim /etc/oratab
修改：orcl:/data/u01/oracle/product/11gR2/db:Y
### 20. 启动和关闭oracle
##查看监听器是否启动
lsnrctl status
lsnrctl start
##启动oracle实例
sqlplus / as sysdba;
