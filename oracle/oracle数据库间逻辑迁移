
首先新库

其次在旧库执行以下脚本，获取库处理的脚本
-- 1 create tablespace
SELECT 'CREATE TABLESPACE ' || NAME || ' LOGGING DATAFILE ''/data/oracle/oradata/herald/' || NAME ||       '.ORA''' ||       ' SIZE 1000M AUTOEXTEND ON NEXT 300M MAXSIZE UNLIMITED EXTENT MANAGEMENT LOCAL;'  FROM V$TABLESPACE WHERE NAME NOT IN ('SYSTEM', 'UNDOTBS1', 'SYSAUX', 'USERS', 'TEMP');

-- 2 create user
SELECT 'CREATE USER ' || USERNAME || ' IDENTIFIED BY PASSWORD;' ||        'GRANT CONNECT, RESOURCE TO ' || USERNAME || ';'   FROM ALL_USERS T WHERE T.CREATED >       (SELECT R.CREATED FROM ALL_USERS R WHERE R.USERNAME = 'SYSTEM') + 1;

-- 3 exp business data
SELECT 'exp SYSTEM/PASSWORD@ORCL FILE=''/tmp/' || USERNAME || '.DMP'' LOG=''/tmp/' ||       USERNAME || '.LOG'' OWNER=' || USERNAME || ';'  FROM ALL_USERS T WHERE T.CREATED >       (SELECT R.CREATED FROM ALL_USERS R WHERE R.USERNAME = 'SYSTEM') + 1;

-- 4 imp business data
SELECT 'imp SYSTEM/PASSWORD@ORCL FILE=''/tmp/' || USERNAME || '.DMP'' LOG=''/tmp/' ||       USERNAME || '.LOG'' FROMUSER=' || USERNAME || ' TOUSER=' || USERNAME || ';'  FROM ALL_USERS T WHERE T.CREATED >       (SELECT R.CREATED FROM ALL_USERS R WHERE R.USERNAME = 'SYSTEM') + 1;


最后，将第3步的脚本先在旧库执行，获取导出数据；将第1、2、4步在新库执行。
